{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "Match Customer with DRI",
  "id": "com.example.camunda.match-customer-with-dri",
  "description": "Service task to match a customer with their designated relationship individual (DRI)",
  "version": 1,
  "category": {
    "id": "connectors",
    "name": "Connectors"
  },
  "appliesTo": [
    "bpmn:ServiceTask"
  ],
  "elementType": {
    "value": "bpmn:ServiceTask"
  },
  "groups": [
    {
      "id": "input",
      "label": "Input Parameters"
    },
    {
      "id": "output",
      "label": "Output Mapping"
    },
    {
      "id": "errors",
      "label": "Error Handling"
    }
  ],
  "properties": [
    {
      "type": "Hidden",
      "value": "match-customer-with-dri",
      "binding": {
        "type": "zeebe:taskDefinition:type"
      }
    },
    {
      "id": "customerId",
      "label": "Customer ID",
      "description": "The unique identifier of the customer to match. Can be a static value or FEEL expression (e.g., =customerId, =order.customerId)",
      "type": "Text",
      "group": "input",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "customerId"
      },
      "constraints": {
        "notEmpty": false
      }
    },
    {
      "id": "customerName",
      "label": "Customer Name",
      "description": "The name of the customer to match (alternative to Customer ID). Can be a static value or FEEL expression (e.g., =customerName, =customer.name)",
      "type": "Text",
      "group": "input",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "customerName"
      },
      "constraints": {
        "notEmpty": false
      }
    },
    {
      "id": "allowMultiple",
      "label": "Allow Multiple Results",
      "description": "When true, allows multiple customer matches to be returned. When false or not set, returns only the first match found.",
      "type": "Dropdown",
      "choices": [
        {
          "name": "False (Return single match)",
          "value": "false"
        },
        {
          "name": "True (Return multiple matches)",
          "value": "true"
        }
      ],
      "group": "input",
      "binding": {
        "type": "zeebe:input",
        "name": "allowMultiple"
      },
      "constraints": {
        "notEmpty": false
      }
    },
    {
      "id": "fuzzyMatching",
      "label": "Fuzzy Matching",
      "description": "When true, enables fuzzy/partial matching for customer searches using similarity algorithms. When false or not set, uses exact matching only.",
      "type": "Dropdown",
      "choices": [
        {
          "name": "False (Exact matching)",
          "value": "false"
        },
        {
          "name": "True (Fuzzy matching)",
          "value": "true"
        }
      ],
      "group": "input",
      "binding": {
        "type": "zeebe:input",
        "name": "fuzzyMatching"
      },
      "constraints": {
        "notEmpty": false
      }
    },
    {
      "id": "resultVariable",
      "label": "Result Variable",
      "description": "Process variable to store the complete matching result (customer, employee details, and status)",
      "type": "String",
      "group": "output",
      "binding": {
        "type": "zeebe:output",
        "source": "=matchingResult",
        "target": "matchingResult"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "id": "customerIdOutput",
      "label": "Customer ID Output",
      "description": "Process variable to store the matched customer ID",
      "type": "String", 
      "group": "output",
      "value": "customerId",
      "binding": {
        "type": "zeebe:output",
        "source": "=customerId",
        "target": "customerId"
      }
    },
    {
      "id": "customerNameOutput",
      "label": "Customer Name Output",
      "description": "Process variable to store the matched customer name",
      "type": "String",
      "group": "output", 
      "value": "customerName",
      "binding": {
        "type": "zeebe:output",
        "source": "=customerName",
        "target": "customerName"
      }
    },
    {
      "id": "employeeIdOutput",
      "label": "Employee ID Output",
      "description": "Process variable to store the matched employee ID",
      "type": "String",
      "group": "output",
      "value": "employeeId", 
      "binding": {
        "type": "zeebe:output",
        "source": "=employeeId",
        "target": "employeeId"
      }
    },
    {
      "id": "employeeNameOutput",
      "label": "Employee Name Output", 
      "description": "Process variable to store the matched employee name",
      "type": "String",
      "group": "output",
      "value": "employeeName",
      "binding": {
        "type": "zeebe:output",
        "source": "=employeeName",
        "target": "employeeName"
      }
    },
    {
      "id": "matchStatusOutput",
      "label": "Match Status Output",
      "description": "Process variable to store the match status (SUCCESS or NOT_FOUND)",
      "type": "String",
      "group": "output",
      "value": "matchStatus",
      "binding": {
        "type": "zeebe:output",
        "source": "=matchStatus",
        "target": "matchStatus"
      }
    }
  ],
  "icon": {
    "contents": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23007bff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2'%3E%3C/path%3E%3Ccircle cx='9' cy='7' r='4'%3E%3C/circle%3E%3Cpath d='M22 21v-2a4 4 0 0 0-3-3.87'%3E%3C/path%3E%3Cpath d='M16 3.13a4 4 0 0 1 0 7.75'%3E%3C/path%3E%3C/svg%3E"
  }
}
